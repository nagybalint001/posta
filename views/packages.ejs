<%- partial('tpl/nav') %>

    <div class="container px-0">
        <!-- Packages panel -->
        <div class="d-print-none">
            <a href="/package" class="nodecor">
                <button class="btn btn-primary my-2 my-sm-0">
                    <strong><i class="fa fa-plus"></i> <%= __('New Package') %></strong>
                </button>
            </a>
            <div class="d-inline float-md-right">
                <a href="<%= basequery + 'export=csv&page=' + (page) %>" class="nodecor">
                    <button class="btn btn-primary my-2 my-sm-0">
                        <i class="fa fa-file-excel-o"></i> <%= __('Export csv') %>   
                    </button>
                </a>
                <form class="form-inline my-md-0 my-sm-2 my-0 d-md-inline" method="GET">
                    <input name="search" class="form-control mr-sm-2" type="text" placeholder="<%= __('Search') %>" aria-label="Search" value="<%= (typeof req.param('search') !== 'undefined') ? req.param('search') : ''  %>">
                    <button class="btn btn-primary my-2 my-sm-0" type="submit"><i class="fa fa-search"></i></button>
                </form>
                <button id="detailed" type="button" class="btn btn-primary collapsed" data-toggle="collapse" data-target="#detailed-search">
                    <%= __('Detailed') %>
                </button>
            </div>
        </div>
        <!-- Packages detailed serach -->
        <div id="detailed-search" class="d-print-none w-100 <%= req.param('pid', '') == '' ? 'collapse' : '' %>">
            <hr>
            <form class="form-inline" method="GET">
                <div class="input-group mb-sm-2 col-sm-12">
                    <div class="input-group-addon"><%= __('Saved searches') %></div>
                    <select id="saved-searches-select" name="division" class="form-control" id="division" data-default-value=" -- <%= __('select an option') %> -- ">
                        <option selected value> -- <%= __('select an option') %> -- </option>
                    </select>
                </div>
                <div class="input-group my-2 my-sm-0 col-md-9 col-sm-8">
                    <div class="input-group-addon"><%= __('Search name') %></div>
                    <input id="save-search-name" type="text" class="form-control" placeholder="<%= __('Search name') %>" name="creator">
                </div>
                <button id="save-search-btn" type="button" class="btn btn-primary col-sm-4 col-md-3">
                    <i class="fa fa-floppy-o"></i> 
                    <%= __('Save search') %>
                </button>                
            </form>
            <hr>
            <form id="detailed-search-form" class="form-inline" method="GET">
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Pid') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Pid') %>" name="pid" value="<%= req.param('pid', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Creator') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Creator') %>" name="creator" value="<%= req.param('creator', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Direction') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Direction') %>" name="dir" value="<%= req.param('dir', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Administrator') %></div>
                    <select name="administrator" class="form-control" id="administrator">
                        <option selected value> -- <%= __('select an option') %> -- </option>
                        <% for(var i = 0; i < administrators.length; i++){ 
                            if (req.param('administrator', '') == administrators[i].name) { %>
                                <option selected><%= administrators[i].name %></option>
                            <% } else { %>
                                <option><%= administrators[i].name %></option>
                        <%  }
                        } %>
                    </select>
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Division') %></div>
                    <select name="division" class="form-control" id="division">
                        <option selected value> -- <%= __('select an option') %> -- </option>                                                    
                        <% for(var i = 0; i < administrators.length; i++){ 
                            if (req.param('division', '') == divisions[i].name) { %>
                                <option selected><%= divisions[i].name %></option>
                            <% } else { %>
                                <option><%= divisions[i].name %></option>
                        <%  }
                        } %>
                    </select>
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Type') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Type') %>" name="type" value="<%= req.param('type', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Number') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Parcel number') %>" name="parcelNumber" value="<%= req.param('parcelNumber', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Partner') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Partner') %>" name="partner" value="<%= req.param('partner', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('City') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('City') %>" name="city" value="<%= req.param('city', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Zip code') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Zip code') %>" name="zip" value="<%= req.param('zip', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Subject') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Subject') %>" name="subject" value="<%= req.param('subject', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('Comment') %></div>
                    <input type="text" class="form-control" placeholder="<%= __('Comment') %>" name="comment" value="<%= req.param('comment', '') %>">
                </div>      
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('From') %></div>
                    <input type="date" class="form-control" placeholder="<%= __('Date') %>" name="from" value="<%= req.param('from', '') %>">
                </div>
                <div class="input-group my-2 mb-sm-0 col-md-4 col-sm-6">
                    <div class="input-group-addon"><%= __('To') %></div>
                    <input type="date" class="form-control" placeholder="<%= __('Date') %>" name="to" value="<%= req.param('to', '') %>">
                </div>
                <br>
                <button type="submit" class="w-100 btn btn-primary my-0 mt-sm-2"><i class="fa fa-search"></i> <%= __('Search') %></button>
            </form>
        </div>
        <hr class="d-print-none">
        <!-- Packages list -->
        <!-- kerdeses h ez hogy legyen... lehet XHR angular betoltes is  akk kereses is -->
        <div id="package-list">
            <% for(var i = 0; i < data.length; i++){ %>
                <%- partial('tpl/package-item', {package:data[i]}) %>
            <% } %>
        </div>
        <nav class="d-print-none">
            <ul class="pagination justify-content-center">
                <li class="page-item <%= (page <= 1) ? 'disabled' : ''%>">
                    <a class="page-link" href="<%= basequery + 'page=' + (page-1) %>">
                        <i class="fa fa-chevron-left"></i> <%= __('Prev') %>
                    </a>
                </li>
                <li class="page-item disabled" >
                    <a class="page-link" href="#"><%= page %></a>
                </li>
                <li class="page-item <%= (page >= maxpage) ? 'disabled' : ''%>">
                    <a class="page-link" href="<%= basequery + 'page=' + (page+1) %>">
                        <%= __('Next') %> <i class="fa fa-chevron-right"></i>
                    </a>
                </li>
            </ul>
        </nav>

    </div>